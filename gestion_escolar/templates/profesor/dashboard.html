{% extends "profesor/base_profesor.html" %}
{% block title %}Dashboard{% endblock %}

{% block contenido %}
<h2 class="mb-4">Bienvenido Profesor {{ request.user.nombre|title }}</h2>

<div class="row g-3">
    <!-- Tarjetas resumen -->
    <div class="col-md-3">
        <div class="card text-bg-primary shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-book fa-2x mb-2"></i>
                <h5 class="card-title">Cursos</h5>
                <p class="display-6">{{ total_cursos }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-success shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-user-graduate fa-2x mb-2"></i>
                <h5 class="card-title">Alumnos</h5>
                <p class="display-6">{{ total_alumnos }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-warning shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-clipboard-list fa-2x mb-2"></i>
                <h5 class="card-title">Notas registradas</h5>
                <p class="display-6">{{ total_notas }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-bg-info shadow-sm">
            <div class="card-body text-center">
                <i class="fas fa-check-square fa-2x mb-2"></i>
                <h5 class="card-title">Asistencias marcadas</h5>
                <p class="display-6">{{ total_asistencias }}</p>
            </div>
        </div>
    </div>
</div>
<hr>

<h4>Notas recientes </h4>
{% if notas|length > 0 %}
<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>Alumno</th>
            <th>Curso</th>
            <th>Evaluación</th>
            <th>Nota</th>
        </tr>
    </thead>
    <tbody>
        {% for n in notas %}
        <tr>
            <td>{{ n.alumno }}</td>
            <td>{{ n.curso }}</td>
            <td>{{ n.evaluacion }}</td>
            <td>{{ n.nota }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-warning text-center">
    <i class="fas fa-exclamation-circle"></i> No hay notas registradas aún para tus cursos.
</div>
{% endif %}

<h4 class="mt-4">Asistencias recientes</h4>
{% if asistencias|length > 0 %}
<table class="table table-striped table-sm">
    <thead>
        <tr>
            <th>Alumno</th>
            <th>Curso</th>
            <th>Semana</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
        {% for a in asistencias %}
        <tr>
            <td>{{ a.alumno }}</td>
            <td>{{ a.curso }}</td>
            <td>{{ a.semana }}</td>
            <td>{{ a.estado }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info text-center">
    <i class="fas fa-info-circle"></i> Aún no se han registrado asistencias para tus cursos.
</div>
{% endif %}
{% endblock %}
